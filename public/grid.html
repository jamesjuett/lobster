<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
    <script src="js/lib/codemirror-compressed.js"></script>
    <script src="js/lib/jquery-1.8.3.min.js"></script>
    <script src="js/lib/jquery.mousewheel.min.js"></script>
    <script src="js/lib/peg-0.8.0.min.js"></script>
    <script src="js/lib/svg.min.js"></script>
    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
    Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Labster</title>
    <meta name="description" content="" />
    <meta name="author" content="James" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="stylesheet" href="css/codemirror.css">
    <link rel="stylesheet" href="css/monokai.css">
    <link rel="stylesheet" href="css/lobster.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/code.css">

    <script src = "js/lib/diff_match_patch.js"></script>
    <script src = "js/lib/underscore-min.js"></script>
    <script src = "js/lib/math.min.js"></script>
    <script src = "js/util/util.js"></script>
    <script src = "js/util/entities.js"></script>
    <script src = "js/util/outlet.js"></script>
    <script src = "js/view/codeDisplay.js"></script>
    <script src = "js/core/internals.js"></script>
    <script src = "js/core/error.js"></script>
    <script src = "js/core/types.js"></script>
    <script src = "js/core/expressions.js"></script>
    <script src = "js/core/declarations.js"></script>
    <script src = "js/core/statements.js"></script>
    <script src = "js/core/Simulation.js"></script>
    <script src = "js/view/actions.js"></script>
    <script src = "js/view/simOutlets.js"></script>
    <script src = "js/view/codeOutlets.js"></script>
    <script src = "js/core/parsing.js"></script>
    <script src = "js/core/parsing2.js"></script>

</head>

<body>
<div class="fill" style="margin-left: auto; margin-right: auto">
<div class="fill" id="main_area" style="display:flex; flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column;">
    <div style="text-align: center; flex:0 1 auto;-webkit-flex:0 1 auto; -ms-flex:0 1 auto">
        <h2 class="labsterTitle">Labster</h2>
        <div style="font-size: 8pt; color: red">If possible, please use Google Chrome for Labster. It runs poorly on other browsers. Sorry for the inconvenience!</div>
        (<a href="https://drive.google.com/file/d/0B49xEM_rtERAMHRFZW5oREdGdjA/view?usp=sharing" target="_blank">Usage Guide</a>)
        <!--(Press the "s" or "->" key to step forward, or scroll while holding ctrl)-->
    </div>
    <!--<textarea class="debug log" style="width: 800px; height: 50px"> </textarea>-->
    <!--<input type="text" class="codeSelect" name ="codeSelect" />-->
    <div id="labster1" style="display:flex; align-items: stretch;-webkit-align-items: stretch;-ms-align-items: stretch; flex: 1 1 auto; -webkit-flex: 1 1 auto; -ms-flex: 1 1 auto; margin-top: 5px; margin-bottom: 5px; overflow-y: scroll">
        <!--<div class="debug execStack" style="width: 125px; margin-right: 5px; display: flex; flex-direction:column;-webkit-flex-direction: column;-ms-flex-direction: column; align-items: stretch;-webkit-align-items: stretch;-ms-align-items: stretch;"></div>-->
        <!-- <div  class="codeArea" style = "display: block; position: absolute; min-height: 300px; width: 300px;">
            <div id = "codeAreaShadow" style = "background: none; border: none; display: block; position: relative; margin: 0; padding: 0;"></div>
        </div> -->
        <div style="flex: 1 1 auto;-webkit-flex: 1 1 auto;-ms-flex: 1 1 auto; display: flex; flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column;">
            <div class="tabs" style="flex: 0 0 auto;-webkit-flex: 0 0 auto;-ms-flex: 0 0 auto;">
                <span class="sourceTab" class="active">Source Code</span>
                <span class="simTab">Simulation</span>
            </div>
            <div class = "tabPanes" style="position: relative; background-color: ghostwhite; flex: 1 1 auto;-webkit-flex: 1 1 auto;-ms-flex: 1 1 auto;">
                <div class="sourcePane" style="display: flex; flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column">
                    <div style= "padding:2px">
                        <input class="saveName" type="text" maxlength="30" value="" />
                        <button class="saveButton">Save</button>
                        <span class="saveMessage" style="display: none">Saving...</span>
                    </div>
                    <div style = "height: 22px; padding: 2px; background-color: lightgray;flex: 0 0 auto;-webkit-flex: 0 0 auto;-ms-flex: 0 0 auto;">
                        <button class = "runButton" style="display: inline-block">Simulate</button>
                        <span class="status"></span>
                    </div>
                    <ul class = "semanticProblems" style = "width: 100%; max-height: 100px; overflow-y: auto; box-sizing: border-box;"></ul>
                    <div class="codeMirrorEditor" style = "position: relative; overflow-y: auto; flex: 1 1 auto;-webkit-flex: 1 1 auto;-ms-flex: 1 1 auto; background-color: #272822">
                        <!--<textarea style="position: absolute; overflow-y: hidden; height: 2000px; color: black"></textarea>-->
                        <!--<div style="height: 400px;"></div>-->
                    </div>

                    <div class="annotationMessagesContainer" style="position: absolute; bottom: 0; left: 0px; right: 0px; overflow: hidden; text-align: center; pointer-events: none">
                        <div class="annotationMessages">
                            <div style="height: 100px; margin-left: 5px; float: right;">
                                <img src="img/lobster_teaching.jpg" class="lobsterRecursionImage" style="height: 90px; margin-left: 5px;"/>
                                <img src="img/lobster_recursion.jpg" class="lobsterTeachingImage" style="display:none; height: 90px; margin-left: 5px;"/>
                                <div style="padding-right: 5px; text-align: center"><button>Thanks!</button></div>
                            </div>
                            <div style="height: 100%; overflow-y: auto"><table style="height: 110px; margin-left: auto; margin-right: auto"><tr><td><div class="annotation-message"></div></td></tr></table></div>
                        </div>
                    </div>





                </div>
                <div class="simPane" style="display: none; flex-direction: column;-webkit-flex-direction: column;-ms-flex-direction: column; padding: 5px" tabindex="0">
                    <div style="margin-bottom: 5px;">
                        <!--<span style = "display: inline-block; width: 4ch"></span>-->
                        <input type="text" style="display: none; width: 4ch" class="stepForwardNum" value="1" />
                        <button class = "skipToEnd">Run</button>

                        <!--Show Functions<input type="checkbox" class="stepInto"/>-->
                        <!--<input type="checkbox" id="tcoCheckbox" checked="false" />-->
                    </div>
                    <div style="position: relative">
                        <div class="runningProgress" style="position: absolute; right: 0; top: 0; margin: 5px; margin-right: 20px; padding: 5px; background-color: rgba(255,255,255,0.7);">
                            Thinking...
                            <!--<progress style="display: inline-block; vertical-align: top"></progress>-->
                        </div>
                        <div class="alerts-container">
                            <div class="alerts">
                                <div style="display:inline-block; padding: 5px">
                                    <div style="height: 100px; margin-left: 5px; float: right;">
                                        <img src="img/lobster.png" style="height: 80px; margin-left: 5px;"/>
                                        <div style="padding-right: 5px; text-align: right"><button>Dismiss</button></div>
                                    </div>
                                    <table style="height: 110px"><tr><td><div class="alerts-message"></div></td></tr></table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <p style = "width: 394px; padding: 5px;" class = "_outlet readOnly memory">memory</p> -->
                            <div style = "text-align: center">Console</div>
                            <div style="position: relative; min-height: 80px">
                                <div class="console" style="position: absolute; resize: both; left: 0; right: 0; top: 0; bottom: 0; background-color: rgba(255,255,255,0.7);"></div>
                            </div>


                    <!-- <p style = "width: 394px; padding: 5px;" class = "_outlet readOnly memory">memory</p> -->

                </div>
            </div>

        </div>
    </div>
</div>

<script>

    var sim = Simulation.instance();
//    var actor = Actor.instance({
//        otherError : function(msg){
//            //console.log(msg.data);
//        },
//        unknownError : function(msg){
//            //console.log(msg.data);
//        },
//        syntaxError : function(msg){
//            //console.log(msg.data);
//            results.parsed = false;
//            results.syntaxError = msg.data;
//        },
//        semanticError : function(msg){
//            //console.log(msg.data);
//        }
//    });

//    sim.addListener(actor);

    $(document).ready(function() {

        $("#runButton").click(function(e){
            sim.setCodeStr()
        });

            var editor = Outlets.CPP.CodeEditor.instance($(".codeMirrorEditor"), sim);
            sim.converse(editor);
            editor.loadCode({
                name: "grid",
                code: "void print(const char g[], int rows, int cols){\n  for(int r = 0; r < rows; ++r){\n    for(int c = 0; c < cols; ++c){\n      cout << g[r * cols + c];\n    }\n    cout << endl;\n  }\n}\n\nint main() {\n  char grid[120];\n  for(int i = 0; i < 120; ++i){\n      grid[i] = 'A'+i%26;\n  }\n  \n  grid[0] = 'I';\n  grid[1] = 'T';\n  grid[2] = 'A';\n  grid[7] = 'H';\n  grid[10] = 'P';\n  grid[12] = 'N';\n  grid[13] = 'A';\n  grid[14] = 'N';\n  grid[17] = 'F';\n  grid[19] = 'T';\n  grid[22] = 'O';\n  grid[23] = 'U';\n  grid[24] = 'T';\n  grid[26] = 'D';\n  grid[29] = 'N';\n  grid[30] = 'R';\n  grid[31] = 'P';\n  grid[32] = 'T';\n  grid[34] = 'I';\n  grid[35] = 'C';\n  grid[38] = 'A';\n  grid[39] = 'O';\n  grid[40] = 'O';\n  grid[41] = 'T';\n  grid[42] = 'E';\n  grid[43] = 'A';\n  grid[44] = 'K';\n  grid[46] = 'N';\n  grid[47] = 'I';\n  grid[48] = 'F';\n  grid[50] = 'E';\n  grid[51] = 'N';\n  grid[53] = 'O';\n  grid[54] = 'T';\n  grid[55] = 'N';\n  grid[58] = 'T';\n  grid[59] = 'N';\n  grid[63] = 'T';\n  grid[65] = 'S';\n  grid[66] = 'U';\n  grid[69] = 'A';\n  grid[70] = 'E';\n  grid[71] = 'E';\n  grid[72] = 'F';\n  grid[74] = 'B';\n  grid[75] = 'T';\n  grid[77] = 'R';\n  grid[78] = 'R';\n  grid[79] = 'R'; \n  grid[80] = 'I';\n  grid[81] = 'O';\n  grid[82] = 'R';\n  grid[85] = 'R';\n  grid[86] = 'O';\n  grid[87] = 'S';\n  grid[88] = 'V';\n  grid[89] = 'A';\n  grid[90] = 'N';\n  grid[93] = 'A';\n  grid[95] = 'N';\n  grid[96] = 'E';\n  grid[98] = 'O';\n  grid[101] = 'Y';\n  grid[103] = 'T';\n  grid[110] = 'L';\n  grid[115] = 'O';\n\n  \n  print(grid, 12, 10);\n}"
            });
//            var codeList = CodeList.instance($("<div></div>"), "api/me/", simOutlet.editor, true);
//
//
//            codeList.loadCode(data.lastFile);
//
//            Actor.instance({
//                loadCode : function(msg){
//
//                }
//            });


            createDefaultOutlets();
    });



</script>
</body>
</html>
